# AI File Processor - ะะพะฝัะตะบัั ะฟัะพะตะบัะฐ
**ะะพัะปะตะดะฝะตะต ะพะฑะฝะพะฒะปะตะฝะธะต:** 2025-01-24  
**ะขะตะบััะฐั ัะฐะทะฐ:** ะะฝะธัะธะฐะปะธะทะฐัะธั ะฟัะพะตะบัะพะฒ

## ๐ฏ ะฆะตะปั ะฟัะพะตะบัะฐ
Production-like MVP ะดะปั ัะตะทัะผะต: ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะต ะดะปั ะพะฑัะฐะฑะพัะบะธ PDF ะธ ัะฐัะบัะฐัะบะธ ั/ะฑ ัะพัะพ ั ะะ.
- **Frontend:** Angular 21 (standalone)
- **Backend:** NestJS 11 (ะผะพะดัะปัะฝัะน ะผะพะฝะพะปะธั)
- **Auth:** Firebase Google OAuth
- **ะะตะฟะปะพะน:** Google Cloud (Cloud Run + Firebase Hosting)

## โ๏ธ ะะฝััะฐััััะบัััะฐ (Google Cloud)
- **Free Trial:** $300 ะบัะตะดะธัะพะฒ ะฝะฐ 90 ะดะฝะตะน
- **Cloud Run:** NestJS ะฑัะบะตะฝะด (Always Free tier)
- **Cloud SQL:** PostgreSQL db-f1-micro ($15/ะผะตั โ ะฟะพะบััะฒะฐะตััั ะบัะตะดะธัะฐะผะธ)
- **Firebase Hosting:** Angular ััะพะฝัะตะฝะด (Always Free)
- **Firebase Auth:** Google OAuth (50K ะฐััะตะฝัะธัะธะบะฐัะธะน/ะผะตั ะฑะตัะฟะปะฐัะฝะพ)
- **Firebase Storage:** 5GB ัะฐะนะปะพะฒ (Always Free)

## ะะะะฆะะกะก ะะะะะะะะขะะ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                     ะะะะฆะะกะก ะะะะะะะะขะะ                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 1. ะะะะฃะกะ:                                                 โ
โ    docker-compose up -d     โ Backend ะฒ Docker             โ
โ    cd frontend && npm start โ Frontend ะปะพะบะฐะปัะฝะพ            โ
โ                                                            โ
โ 2. ะะะะะะะะะฏ ะะะะ:                                         โ
โ    ะะทะผะตะฝัะตะผ backend/src/ โ Docker hot reload               โ
โ    ะะทะผะตะฝัะตะผ frontend/src/ โ Angular hot reload             โ
โ                                                            โ
โ 3. ะฃะกะขะะะะะะ ะะะะซะฅ ะะะะะขะะ:                                โ
โ    Frontend: cd frontend && npm install <ะฟะฐะบะตั>            โ
โ    Backend: docker-compose up --build -d                   โ
โ                                                            โ
โ 4. ะะงะะกะขะะ:                                                โ
โ    Backend/Shared: ะฃะดะฐะปัะตะผ ะปะพะบะฐะปัะฝัะต node_modules          โ
โ    Frontend: ะััะฐะฒะปัะตะผ node_modules ะดะปั ัะฐะฑะพัั             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

## ๐ณ ะะะะะ-ะะะะคะะะฃะะะฆะะฏ (ะะะะะงะะฏ)

### ะััะธัะตะบัััะฐ Workspaces
ai-file-processor/
โโโ package.json # ะะพัะฝะตะฒะพะน package.json ั workspaces
โ "workspaces": ["shared", "backend"] โ ะฃะฟัะฐะฒะปะตะฝะธะต ะทะฐะฒะธัะธะผะพัััะผะธ
โโโ backend/ # NestJS ะฑัะบะตะฝะด
โโโ shared/ # ะะฑัะธะต ัะธะฟั TypeScript (@ai-file-processor/shared)
โโโ frontend/ # Angular (ะพัะดะตะปัะฝะพ, ะฝะต ะฒ workspaces)


## ะัะพัะตั ะดะตะฟะปะพั
# 1. ะกะฑะพัะบะฐ ะพะฑัะฐะทะฐ (ะบะพะฝัะตะนะฝะตัั ะผะพะณัั ัะฐะฑะพัะฐัั)
docker build -t mikhailmatsuev/ai-file-processor:latest .

# 2. ะะตัะตะด ัะตััะพะผ ะพััะฐะฝะพะฒะธัั ะตัะปะธ ะฟะพัั ะทะฐะฝัั
docker stop nest-backend 2>/dev/null || true

# 3. ะขะตัั ะฝะพะฒะพะณะพ ะพะฑัะฐะทะฐ
docker run -p 3000:3000 --name test-app mikhailmatsuev/ai-file-processor:latest

# 4. ะัะปะธ ัะตัั ะพะบ - ะทะฐะณััะทะธัั ะฒ Docker Hub
docker push mikhailmatsuev/ai-file-processor:latest

# 5. ะะฐ Koyeb ัะดะตะปะฐัั redeploy (ััะฐััะน ะบะพะฝัะตะนะฝะตั Koyeb ัะฐะผ ะทะฐะผะตะฝะธั)
# 6. ะะตัะฝััั ะปะพะบะฐะปัะฝะพ ะดะตะฒ ะพะบััะถะตะฝะธะต
docker-compose up -d


## ๐๏ธ ะััะธัะตะบัััะฐ

ai-file-processor/
โโโ frontend/                    # Angular 21 โ Firebase Hosting
โ   โโโ src/
โ   โ   โโโ app/
โ   โ   โโโ components/
โ   โ   โโโ services/
โ   โ   โโโ utils/
โ   โโโ angular.json
โ   โโโ tsconfig.json
โ
โโโ backend/                     # NestJS 11 โ Cloud Run
โ   โโโ src/
โ   โ   โโโ modules/
โ   โ   โ   โโโ auth/
โ   โ   โ   โโโ files/
โ   โ   โ   โโโ users/
โ   โ   โโโ common/
โ   โ   โโโ main.ts
โ   โโโ Dockerfile              # ะะพะฝัะตะนะฝะตัะธะทะฐัะธั ะดะปั Cloud Run
โ   โโโ cloudbuild.yaml         # CI/CD ะฟะฐะนะฟะปะฐะนะฝ
โ   โโโ tsconfig.json
โ
โโโ shared/                      # ะะดะธะฝะฐั ัะธััะตะผะฐ ัะธะฟะพะฒ
โ   โโโ src/
โ   โ   โโโ interfaces/         # ะะฑัะธะต ะธะฝัะตััะตะนัั-ะบะพะฝััะฐะบัั
โ   โ   โ   โโโ file.interface.ts      # IFile
โ   โ   โ   โโโ user.interface.ts      # IUser
โ   โ   โ   โโโ processable.interface.ts
โ   โ   โ
โ   โ   โโโ backend/            # ะขะธะฟั ะดะปั NestJS
โ   โ   โ   โโโ dto/
โ   โ   โ   โ   โโโ request/    # DTO ะทะฐะฟัะพัะพะฒ
โ   โ   โ   โ   โโโ response/   # DTO ะพัะฒะตัะพะฒ
โ   โ   โ   โโโ entities/       # ะกััะฝะพััะธ TypeORM
โ   โ   โ
โ   โ   โโโ frontend/           # ะขะธะฟั ะดะปั Angular
โ   โ       โโโ models/         # UI-ะผะพะดะตะปะธ
โ   โ       โโโ types/          # ะคัะพะฝัะตะฝะด-ัะฟะตัะธัะธัะฝัะต ัะธะฟั
โ   โ
โ   โโโ package.json
โ   โโโ tsconfig.json           # ะะปะธะฐัั: @shared/*, @interfaces/* ะธ ั.ะด.
โ
โโโ firebase/                   # Firebase ะบะพะฝัะธะณััะฐัะธั
โ   โโโ storage.rules          # ะัะฐะฒะธะปะฐ ะดะพัััะฟะฐ ะบ ัะฐะนะปะฐะผ
โ   โโโ firebase.json
โ
โโโ project_context.md          # ะญัะพั ัะฐะนะป

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ             Google Cloud Platform              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ ะะตะณะธะพะฝ: europe-west3 (ะคัะฐะฝะบัััั, ะะตัะผะฐะฝะธั) โ
โ                                                โ
โ  โโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโ           โ
โ  โ Cloud Run   โโโโโโบโ Cloud SQL   โ           โ
โ  โ (NestJS)    โ     โ (PostgreSQL)โ           โ
โ  โโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโ           โ
โ         โ                     โ                โ
โ         โผ                     โผ                โ
โ  โโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโ           โ
โ  โ ะะฝัะตัะฝะตั    โ     โ ะัะธะฒะฐัะฝัะน IPโ           โ
โ  โ (ะัะฑะปะธัะฝัะน) โ     โ (VPC)       โ           โ
โ  โโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโ           โ
โ                                                โ
โ  ๐ Firebase Hosting (ะะปะพะฑะฐะปัะฝัะน CDN)          โ
โ  (Angular ััะฐัะธะบะฐ)                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ะััะธัะตะบัััะฐ ั PostgreSQL:

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      Google Cloud Platform                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโค
โ   Angular App   โโโโโโถโ   NestJS API    โโโโโโถโ   PostgreSQL    โ
โ   (Frontend)    โ     โ   (Backend)     โ     โ   (Cloud SQL)   โ
โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
        โ                       โ                       โ
        โ                       โ                       โ
        โผ                       โผ                       โผ
โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
โ Firebase Auth   โ     โFirebase Storage โ     โ   Prisma       โ
โ (Google OAuth)  โ     โ (User Files)    โ     โ   (ORM)         โ
โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ


๐บ๏ธ ะกัะตะผะฐ ะฟัะพะตะบัะฐ ั Docker Compose

E:\project\converter\ai-file-processor\         โ ะะะะะะฌ ะะะะะะขะ
โโโ ๐ frontend/                    # Angular (ะปะพะบะฐะปัะฝะพ, ะะ ะฒ Docker)
โ   โโโ src/
โ   โโโ proxy.conf.json            # โ ะัะพะบัะธ ะฝะฐ ะฑัะบะตะฝะด
โ   โโโ angular.json
โ   โโโ package.json
โ
โโโ ๐ backend/                     # NestJS (ะฒ Docker)
โ   โโโ src/
โ   โโโ Dockerfile                 # โ ะะปั ะฟัะพะดะฐะบัะตะฝะฐ (Cloud Run)
โ   โโโ Dockerfile.dev             # โ ะะปั ัะฐะทัะฐะฑะพัะบะธ
โ   โโโ package.json
โ   โโโ tsconfig.json
โ
โโโ ๐ shared/                      # ะะฑัะธะต ัะธะฟั TypeScript
โ   โโโ src/
โ   โโโ package.json
โ   โโโ tsconfig.json
โ
โโโ ๐ firebase/                    # Firebase ะบะพะฝัะธะณะธ
โ   โโโ storage.rules
โ   โโโ firebase.json
โ
โโโ ๐ docker-compose.yml          # โ ะะะะะะซะ ะคะะะ (ะทะดะตัั!)
โโโ ๐ docker-compose.override.yml # โ ะะฟัะธะพะฝะฐะปัะฝะพ: ะฟะตัะตะพะฟัะตะดะตะปะตะฝะธั
โโโ ๐ .env                        # ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
โโโ ๐ .dockerignore
โโโ ๐ project_context.md

## ๐ง ะััะธัะตะบัััะฝัะต ัะตัะตะฝะธั ะธ ะฟะฐััะตัะฝั

### ๐ฆ ะะฐััะตัะฝั ะฟัะพะตะบัะธัะพะฒะฐะฝะธั
- **ะะพะดัะปัะฝัะน ะผะพะฝะพะปะธั (Modular Monolith)** โ ะปะพะณะธัะตัะบะพะต ัะฐะทะดะตะปะตะฝะธะต ะฝะฐ ะผะพะดัะปะธ ะฒ ัะฐะผะบะฐั ะพะดะฝะพะณะพ ะฟัะธะปะพะถะตะฝะธั
- **Repository Pattern** โ ะดะปั ัะฐะฑะพัั ั ะะ (ะฐะฑัััะฐะบัะธั ะฝะฐะด TypeORM)
- **Service Layer** โ ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ ะธะฝะบะฐะฟััะปะธัะพะฒะฐะฝะฐ ะฒ ัะตัะฒะธัะฐั
- **DTO Pattern** โ ัะฒะฝะพะต ัะฐะทะดะตะปะตะฝะธะต ะผะตะถะดั ัััะฝะพัััะผะธ ะะ ะธ ะพะฑัะตะบัะฐะผะธ ะฟะตัะตะดะฐัะธ
- **Dependency Injection** โ ะฒัััะพะตะฝ ะฒ Angular ะธ NestJS, ะธัะฟะพะปัะทัะตััั ะฒะตะทะดะต
- **Interface-based DTO/Model** - ะะฝัะตััะตะนั (ะบะพะฝััะฐะบั) โ ะะฝะพะถะตััะฒะตะฝะฝัะต ัะตะฐะปะธะทะฐัะธะธ (DTO ะดะปั ะฑัะบะฐ and Models ะดะปั ััะพะฝัะฐ) ั ัะฐะทะฝัะผะธ ะพัะฒะตัััะฒะตะฝะฝะพัััะผะธ

### ๐ ะกะธััะตะผะฐ ัะธะฟะพะฒ ะธ ะธะฝัะตััะตะนัะพะฒ (TypeScript)
shared/    โ ะขะะะฌะะ ะขะะะซ (ะธะฝัะตััะตะนัั, ัะธะฟั, enums)
backend/   โ ะะะะะะะะฆะะฏ (ะดะตะบะพัะฐัะพัั NestJS, TypeORM)
frontend/  โ ะะะะะะะะฆะะฏ (Angular ะผะพะดะตะปะธ, ัะตัะฒะธัั)

### ๐ ะัะฐะฒะธะปะฐ ะดะปั shared/:
ะขะพะปัะบะพ TypeScript ัะธะฟั (ะธะฝัะตััะตะนัั, ัะธะฟั, enums)
ะะธะบะฐะบะธั ะดะตะบะพัะฐัะพัะพะฒ (@ApiProperty, @Entity, @Column)
ะะธะบะฐะบะธั runtime ะทะฐะฒะธัะธะผะพััะตะน (class-validator, typeorm, @nestjs/*)
ะขะพะปัะบะพ ััััะบัััะฐ ะดะฐะฝะฝัั, ะฑะตะท ะปะพะณะธะบะธ

**ะัะธะฝัะธะฟั ัะฐะฑะพัั:**
1. **ะะฝัะตััะตะนัั-ะบะพะฝััะฐะบัั** โ ะพะฑัะธะต ะธะฝัะตััะตะนัั ะฒ `interfaces/` (IFile, IUser)
2. **DTO ะบะปะฐััั** โ ัะตะฐะปะธะทััั ะธะฝัะตััะตะนัั + ะฒะฐะปะธะดะฐัะธั + Swagger ะดะตะบะพัะฐัะพัั
3. **ะกััะฝะพััะธ ะะ** โ ัะตะฐะปะธะทััั ะธะฝัะตััะตะนัั + TypeORM ะดะตะบะพัะฐัะพัั
4. **Frontend ะผะพะดะตะปะธ** โ ัะตะฐะปะธะทััั ะธะฝัะตััะตะนัั + UI-ัะฟะตัะธัะธัะฝัะต ะฟะพะปั

**ะัะธะผะตั ะธะผะฟะปะตะผะตะฝัะฐัะธะธ:**

// 1. ะะฝัะตััะตะนั (ะพะฑัะธะน ะบะพะฝััะฐะบั)
export interface IFile {
  id: string;
  name: string;
  size: number;
  mimeType: string;
}

// 2. DTO ะดะปั ะฑัะบะฐ (NestJS)
export class UploadFileDto implements IFile {
  @ApiProperty() @IsString() name: string;
  @ApiProperty() @IsNumber() size: number;
  // + Swagger ะธ ะฒะฐะปะธะดะฐัะธั
}

// 3. ะะพะดะตะปั ะดะปั ััะพะฝัะฐ (Angular)
export class FileModel implements IFile {
  id: string; name: string; size: number; mimeType: string;
  progress: number; // UI-ัะฟะตัะธัะธัะฝะพะต ะฟะพะปะต
  status: string;   // UI-ัะฟะตัะธัะธัะฝะพะต ะฟะพะปะต
}
### ๐ ะะพะผะผัะฝะธะบะฐัะธั ะผะตะถะดั ััะพะฝัะตะฝะดะพะผ ะธ ะฑัะบะตะฝะดะพะผ
REST API โ ะพัะฝะพะฒะฝะพะน ะฟัะพัะพะบะพะป (NestJS ะบะพะฝััะพะปะปะตัั)

Swagger/OpenAPI โ ะฐะฒัะพะผะฐัะธัะตัะบะฐั ะดะพะบัะผะตะฝัะฐัะธั API

WebSocket โ ะฟะปะฐะฝะธััะตััั ะดะปั real-time ัะฒะตะดะพะผะปะตะฝะธะน ะพ ะฟัะพัะตััะต ะพะฑัะฐะฑะพัะบะธ

Firebase Storage โ ะฟััะผัะต ะทะฐะณััะทะบะธ ัะฐะนะปะพะฒ ั signed URLs

### ๐๏ธ ะะฐะฑะพัะฐ ั ะดะฐะฝะฝัะผะธ
PostgreSQL โ ะพัะฝะพะฒะฝะฐั ัะตะปััะธะพะฝะฝะฐั ะะ

TypeORM โ ORM ะดะปั ัะฐะฑะพัั ั ะะ

Firebase Storage โ ััะฐะฝะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปััะบะธั ัะฐะนะปะพะฒ

ะััะธัะพะฒะฐะฝะธะต: Redis (ะฟะปะฐะฝะธััะตััั ะฝะฐ Phase 2)

### ๐ ะะตะฐะบัะธะฒะฝะพะต ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธะต (Observables)
Frontend (Angular): ะัะต HTTP-ะทะฐะฟัะพัั ะฒะพะทะฒัะฐัะฐัั Observable<T>

Backend (NestJS): ะะพะดะดะตัะถะบะฐ ัะตะฐะบัะธะฒะฝัั ัััะธะผะพะฒ ัะตัะตะท RxJS

State Management: ะัะฟะพะปัะทะพะฒะฐะฝะธะต BehaviorSubject ะดะปั ัะฟัะฐะฒะปะตะฝะธั ัะพััะพัะฝะธะตะผ

๐ฐ ะคะธะฝะฐะฝัะพะฒัะน ะฟะปะฐะฝ
ะะตัััั 1-3: $0 (ะฒัั ะฟะพะบััะฒะฐะตััั $300 ะบัะตะดะธัะฐะผะธ Google Cloud)

ะะพัะปะต 90 ะดะฝะตะน:

ะะฐัะธะฐะฝั A: $7-15/ะผะตั ะทะฐ Cloud SQL (ะพััะฐะปัะฝะพะต ะฑะตัะฟะปะฐัะฝะพ)

ะะฐัะธะฐะฝั B: ะะธะณัะฐัะธั ะะ ะฝะฐ Supabase โ $0 ะฟะพะปะฝะพัััั

ะะฐัะธะฐะฝั C: ะะตัะตัะพะด ะฝะฐ Always Free + ะพัะดะตะปัะฝัะน ัะพััะธะฝะณ ะะ

โ ะัะฟะพะปะฝะตะฝะพ
1. ะะปะฐะฝะธัะพะฒะฐะฝะธะต
ะะฟัะตะดะตะปะตะฝ ััะตะบ: Angular 21 + NestJS 11 + Node.js 20.19+

ะัะฑัะฐะฝะฐ ะฐััะธัะตะบัััะฐ: ะผะพะดัะปัะฝัะน ะผะพะฝะพะปะธั (ะฝะต ะผะธะบัะพัะตัะฒะธัั)

ะะตัะตะฝะพ: ัะฟัะพััะฝะฝะฐั ะฐะฒัะพัะธะทะฐัะธั (Google OAuth ัะพะปัะบะพ)

ะะพะฑะฐะฒะปะตะฝ Swagger ะดะปั ะดะพะบัะผะตะฝัะฐัะธะธ API

ะกะพะทะดะฐะฝะฐ ะพะฑัะฐั ะฟะฐะฟะบะฐ shared/ ะดะปั ัะธะฟะพะฒ

ะะฟัะตะดะตะปะตะฝะฐ ะธะฝััะฐััััะบัััะฐ: Google Cloud + Firebase

2. ะะฐัััะพะนะบะฐ ะธะฝััะฐััััะบัััั
Node.js 20.19.0+ ัััะฐะฝะพะฒะปะตะฝ

Firebase ะฟัะพะตะบั ัะพะทะดะฐะฝ: ai-file-processor

Google Sign-in ะฒะบะปัััะฝ ะฒ Firebase Authentication

ะะพะฝัะธะณ firebaseConfig ัะพััะฐะฝัะฝ ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ

ะะตัะตะฝะธะต ะฟะพ ะะ: PostgreSQL ะฝะฐ Cloud SQL (ะฟะตัะฒัะต 90 ะดะฝะตะน ะธะท ะบัะตะดะธัะพะฒ)

3. ะะฝะธัะธะฐะปะธะทะฐัะธั ะฟัะพะตะบัะพะฒ (ะฒัะฟะพะปะฝัะตััั ัะตะนัะฐั)
ะกะพะทะดะฐะฝะฐ ััััะบัััะฐ ะฟะฐะฟะพะบ (frontend/, backend/, shared/)

Angular 21 ะฟัะพะตะบั ัะพะทะดะฐะฝ (standalone, SCSS, routing)

NestJS 11 ะฟัะพะตะบั ัะพะทะดะฐะฝ

ะะฐัััะพะตะฝั TypeScript ะฐะปะธะฐัั ะดะปั shared/

ะกะพะทะดะฐะฝ ะฑะฐะทะพะฒัะน Dockerfile ะดะปั NestJS

ะะฐัััะพะตะฝ firebase/ ะบะฐัะฐะปะพะณ ั ะบะพะฝัะธะณะฐะผะธ

## โ ะัะฟะพะปะฝะตะฝะพ
### 1. ะะปะฐะฝะธัะพะฒะฐะฝะธะต
- [x] ะะฟัะตะดะตะปะตะฝ ััะตะบ: Angular 21 + NestJS 11 + Node.js 20.19+
- [x] ะัะฑัะฐะฝะฐ ะฐััะธัะตะบัััะฐ: ะผะพะดัะปัะฝัะน ะผะพะฝะพะปะธั (ะฝะต ะผะธะบัะพัะตัะฒะธัั)
- [x] ะะตัะตะฝะพ: ัะฟัะพััะฝะฝะฐั ะฐะฒัะพัะธะทะฐัะธั (Google OAuth ัะพะปัะบะพ)
- [x] ะะพะฑะฐะฒะปะตะฝ Swagger ะดะปั ะดะพะบัะผะตะฝัะฐัะธะธ API
- [x] ะกะพะทะดะฐะฝะฐ ะพะฑัะฐั ะฟะฐะฟะบะฐ `shared/` ะดะปั ัะธะฟะพะฒ
- [x] ะะฟัะตะดะตะปะตะฝะฐ ะธะฝััะฐััััะบัััะฐ: Google Cloud + Firebase

### 2. ะะฐัััะพะนะบะฐ ะธะฝััะฐััััะบัััั
- [x] Node.js 20.19.0+ ัััะฐะฝะพะฒะปะตะฝ
- [x] Firebase ะฟัะพะตะบั ัะพะทะดะฐะฝ: `ai-file-processor`
- [x] Google Sign-in ะฒะบะปัััะฝ ะฒ Firebase Authentication
- [x] ะะพะฝัะธะณ `firebaseConfig` ัะพััะฐะฝัะฝ ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ
- [x] ะะตัะตะฝะธะต ะฟะพ ะะ: PostgreSQL ะฝะฐ Cloud SQL (ะฟะตัะฒัะต 90 ะดะฝะตะน ะธะท ะบัะตะดะธัะพะฒ)

### 3. ะะฝะธัะธะฐะปะธะทะฐัะธั ะฟัะพะตะบัะพะฒ (ะฒัะฟะพะปะฝัะตััั ัะตะนัะฐั)
- [ั] ะกะพะทะดะฐะฝะฐ ััััะบัััะฐ ะฟะฐะฟะพะบ (frontend/, backend/, shared/)
- [ั] Angular 21 ะฟัะพะตะบั ัะพะทะดะฐะฝ (standalone, SCSS, routing)
- [ั] NestJS 11 ะฟัะพะตะบั ัะพะทะดะฐะฝ
- [ั] ะะฐัััะพะตะฝั TypeScript ะฐะปะธะฐัั ะดะปั `shared/`
- [ั] ะกะพะทะดะฐะฝ ะฑะฐะทะพะฒัะน Dockerfile ะดะปั NestJS
- [ั] ะะฐัััะพะตะฝ firebase/ ะบะฐัะฐะปะพะณ ั ะบะพะฝัะธะณะฐะผะธ


๐ฆ ะะฐะฒะธัะธะผะพััะธ
Backend ะทะฐะฒะธัะธั ะพั Shared: "@ai-file-processor/shared": "file:../shared"
Shared ะฟัะฑะปะธะบัะตั ัะธะฟั: "main": "dist/index.js", "types": "dist/index.d.ts"
ะะพัะฝะตะฒะพะน package.json ัะฟัะฐะฒะปัะตั workspaces


๐ง ะขะตะบััะธะต ะทะฐะดะฐัะธ
ะะฐะฒะตััะธัั ะธะฝะธัะธะฐะปะธะทะฐัะธั ะฟัะพะตะบัะพะฒ:


# AI File Processor - ะะปะฐะฝ ัะฐะทัะฐะฑะพัะบะธ โ

## ๐ง ะจะะ 1: ะัะพะฒะตัะบะฐ ะพะบััะถะตะฝะธั โ ะะซะะะะะะะ
- [x] ะัะบะตะฝะด ะดะพัััะฟะตะฝ: `http://localhost:3000/health`
- [x] Swagger ะดะพัััะฟะตะฝ: `http://localhost:3000/api`
- [x] PgAdmin ะดะพัััะฟะตะฝ: `http://localhost:5050`
- [x] PostgreSQL ะทะฐะฟััะตะฝ (ะฟะพัั 5432)
- [x] Docker ะบะพะฝัะตะนะฝะตัั: `backend`, `postgres`, `pgadmin`

## ๐ ะจะะ 2: ะะฐัััะพะนะบะฐ Auth (Firebase)
### Backend (NestJS):
- [x] ะฃััะฐะฝะพะฒะธัั Firebase Admin SDK: `npm install firebase-admin`
- [x] ะกะพะทะดะฐัั ะผะพะดัะปั `auth`: `nest g module auth`
- [x] ะกะพะทะดะฐัั ัะตัะฒะธั `auth`: `nest g service auth`
- [x] ะกะพะทะดะฐัั guard: `nest g guard auth/guards/firebase`
- [x] ะกะพะทะดะฐัั ะบะพะฝััะพะปะปะตั: `nest g controller auth`
- [x] ะกะพะทะดะฐัั DTO: `login.dto.ts`, `auth-response.dto.ts`
- [x] ะกะพะทะดะฐัั ะบะพะฝัะธะณ Firebase: `firebase-admin.config.ts`
- [x] ะะพะฑะฐะฒะธัั ัะฝะดะฟะพะธะฝัั: `/auth/login`, `/auth/me`, `/auth/verify`
- [x] ะะฝัะตะณัะธัะพะฒะฐัั AuthModule ะฒ AppModule
- [x] ะะฐัััะพะธัั ัััะฐัะตะณะธั JWT Firebase ะฒ guard
- [x] ะัะพัะตััะธัะพะฒะฐัั ะฐััะตะฝัะธัะธะบะฐัะธั ัะตัะตะท Swagger

### Frontend (Angular):
- [x] ะฃััะฐะฝะพะฒะธัั Firebase SDK: `npm install firebase`
- [ั] ะกะพะทะดะฐัั ัะตัะฒะธั: `ng g service services/auth`
- [x] ะกะพะทะดะฐัั ะบะพะผะฟะพะฝะตะฝั Login: `ng g component pages/login`
- [x] ะะฐัััะพะธัั Firebase ะบะพะฝัะธะณ ะธะท `firebase-config.txt`
- [x] ะะตะฐะปะธะทะพะฒะฐัั Google Sign-in

## ๐ ะจะะ 3: ะะฐัััะพะนะบะฐ Files ะผะพะดัะปั
### Backend:
- [x] ะกะพะทะดะฐัั ะผะพะดัะปั `files`: `nest g module files`
- [x] ะกะพะทะดะฐัั ัะตัะฒะธั `files`: `nest g service files`
- [x] ะกะพะทะดะฐัั ะบะพะฝััะพะปะปะตั `files`: `nest g controller files`
- [x] ะะฐัััะพะธัั ะทะฐะณััะทะบั ัะฐะนะปะพะฒ (multipart/form-data)
- [] ะะฝัะตะณัะธัะพะฒะฐัั Firebase Storage

ะะฐะดะฐัะฐ ะฝะฐ 28.01.26
ะัะพะฒะตัะบะฐ ะปะธะผะธัะพะฒ ะธ ะฟะพะดะฟะธัะบะธ ะฟะตัะตะด ะทะฐะณััะทะบะพะน ะัะพะฒะตัะธัั
ะะตะฝะตัะฐัะธั signed URL ะดะปั ัะบะฐัะธะฒะฐะฝะธั ะฟัะพะฒะตัะธัั

ะะฐะดะฐัะฐ: ะะพะดะดะตัะถะบะฐ ะฟะพะดะฟะธัะพะบ iOS ะธ ะฟัะตะผะธัะผ-ะดะพัััะฟะฐ ะฝะฐ ะฒะตะฑะต
ะะฟะธัะฐะฝะธะต:
ะะตะฐะปะธะทะพะฒะฐัั ะผะตัะฐะฝะธะทะผ ะฟัะตะดะพััะฐะฒะปะตะฝะธั ะฟัะตะผะธัะผ-ะดะพัััะฟะฐ ะฒ ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะธ ะฝะฐ ะพัะฝะพะฒะต ะฟะพะดะฟะธัะพะบ, ะบัะฟะปะตะฝะฝัั ะฒ iOS-ะฟัะธะปะพะถะตะฝะธะธ.
ะขัะตะฑะพะฒะฐะฝะธั:

ะกะดะตะปะฐัั ัะตัะฒะธั, ะบะพัะพััะน ะฑัะดะตั ะฟัะธะฝะธะผะฐัั ะพั ะะะะก ัะฒะตะดะพะผะปะตะฝะธั, ััะพ ะบะฐะบะพะน-ัะพ ัะทะตั ะฟะพะปั
ะ ัะตัะผะธะฝะพะปะพะณะธะธ Apple ััะพ S2S-ัะฒะตะดะพะผะปะตะฝะธั โ Server-to-Server notifications.
ะขะพ ะตััั ัะตัะฒะธั ะฝะฐ backend, ะบะพัะพััะน ะฟัะธะฝะธะผะฐะตั ัะฒะตะดะพะผะปะตะฝะธั ะพั Apple ะพ ัะพะฑััะธัั ะฟะพะดะฟะธัะบะธ:
ะะพะบัะฟะบะฐ (DID_RENEW / INITIAL_BUY) โ isPaid = true
ะัะผะตะฝะฐ (CANCEL) โ isPaid = false
ะะพะทะฒัะฐั (REFUND) โ isPaid = false
ะะตัะดะฐัะฝะพะต ะฟัะพะดะปะตะฝะธะต (DID_FAIL_TO_RENEW) โ isPaid = false
ะ ะฝะฐัะตะน ะทะฐะดะฐัะต ะพะฝ ะฑัะดะตั ัะตะฐะปะธะทะพะฒะฐะฝ ะบะฐะบ endpoint /apple/notifications ะฝะฐ backend, ะบะพัะพััะน:
ะะพะปััะฐะตั POST ะพั Apple.
ะะฐะปะธะดะธััะตั ัะฒะตะดะพะผะปะตะฝะธะต (ะฟะพะดะฟะธัั, JWT, receipt ะธ ั.ะด.).
ะะฑะฝะพะฒะปัะตั ะฟะพะปะต isPaid ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ะฑะฐะทะต.
(ะะฟัะธะพะฝะฐะปัะฝะพ) ะะพะณะธััะตั ัะพะฑััะธะต ะดะปั ะฐัะดะธัะฐ.
ะขะพ ะตััั ะบัะฐัะบะพ: ััะพ Apple S2S Notifications Handler.
ะัะปะธ ัะพัะตัั, ั ะผะพะณั ะฝะฐะฑัะพัะฐัั ะฟัะธะผะตั ัะฐะบะพะณะพ ัะตัะฒะธัะฐ ะฝะฐ NestJS, ะณะพัะพะฒะพะณะพ ะบ ะธะฝัะตะณัะฐัะธะธ ั ะฝะฐัะธะผ IUser ะธ ะฟะพะดะฟะธัะบะฐะผะธ. ะฅะพัะตัั, ััะพะฑั ั ััะพ ัะดะตะปะฐะป?

ะะฒัะพัะธะทะฐัะธั ะฒ iOS
ะะพะปัะทะพะฒะฐัะตะปั ะดะพะปะถะตะฝ ะทะฐะปะพะณะธะฝะธัััั ัะตัะตะท Google / Firebase / Email / Apple ID.
ะัะต ะฟะพะบัะฟะบะธ ะธ restore ะฟัะธะฒัะทัะฒะฐัััั ะบ ััะพะผั ะฐะบะบะฐัะฝัั (firebaseUid).
ะะพะบัะฟะบะฐ ะธ Restore Purchase
ะะพะฒัะต ะฟะพะบัะฟะบะธ โ receipt โ backend โ verify ั Apple โ isPaid = true.
ะกัะฐััะต ะฟะพะบัะฟะบะธ โ Restore Purchase โ receipt โ backend โ verify โ ะพะฑะฝะพะฒะปะตะฝะธะต isPaid.
Backend ะบะฐะบ ะธััะพัะฝะธะบ ะฟัะฐะฒะดั
ะัะต ะดะฐะฝะฝัะต ะพ ะฟะพะดะฟะธัะบะต ััะฐะฝัััั ะฒ ะฑะฐะทะต (apple_purchases).
ะะพะปะต isPaid ั ะฟะพะปัะทะพะฒะฐัะตะปั ะพััะฐะถะฐะตั ะฐะบััะฐะปัะฝัะน ะฟัะตะผะธัะผ-ััะฐััั.
S2S ัะฒะตะดะพะผะปะตะฝะธั Apple (ะพะฟัะธะพะฝะฐะปัะฝะพ)
Backend endpoint /apple/notifications ะฟะพะปััะฐะตั ัะพะฑััะธั ะพัะผะตะฝั, ะฒะพะทะฒัะฐัะฐ ะธะปะธ ะฝะตัะดะฐัะฝะพะณะพ ะฟัะพะดะปะตะฝะธั ะฟะพะดะฟะธัะบะธ.
ะกัะฐััั ะฟะพะดะฟะธัะบะธ ะพะฑะฝะพะฒะปัะตััั ะผะณะฝะพะฒะตะฝะฝะพ (isPaid = false ะฟัะธ ะพัะผะตะฝะต/ะฒะพะทะฒัะฐัะต).
ะะตะฑ-ะฟัะธะปะพะถะตะฝะธะต
ะะพะปัะทะพะฒะฐัะตะปั ะปะพะณะธะฝะธััั โ backend ะฟัะพะฒะตััะตั isPaid โ ะพัะพะฑัะฐะถะฐะตั ะฟัะตะผะธัะผ-ััะฝะบัะธะธ.
Restore ะฒ ะฒะตะฑะต ะฝะต ะฝัะถะตะฝ, ะบะปััะตะฒะพะน ะผะพะผะตะฝั โ ะพะฑัะธะน ะฐะบะบะฐัะฝั ะผะตะถะดั ะฟัะธะปะพะถะตะฝะธะตะผ ะธ ะฒะตะฑะพะผ.
ะฆะตะปั:
ะะฑะตัะฟะตัะธัั ะฑะตะทะพะฟะฐัะฝัั ะธ ะฐะบััะฐะปัะฝัั ัะธะฝััะพะฝะธะทะฐัะธั ะฟัะตะผะธัะผ-ััะฐัััะฐ ะผะตะถะดั iOS-ะฟัะธะปะพะถะตะฝะธะตะผ ะธ ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะตะผ ะฑะตะท ะธัะฟะพะปัะทะพะฒะฐะฝะธั ััะพัะพะฝะฝะธั ัะตัะฒะธัะพะฒ, ัะฐะบะธั ะบะฐะบ RevenueCat.


ะะฐะดะฐัะฐ: ะะฐัััะพะธัั ะทะฐะณััะทะบั ัะฐะนะปะพะฒ ะดะปั ะฝะตะฐะฒัะพัะธะทะพะฒะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน (ะณะพััะตะน) ั ะพะณัะฐะฝะธัะตะฝะธัะผะธ.
ะขัะตะฑะพะฒะฐะฝะธั:
ะะปั ะณะพััั ะธัะฟะพะปัะทะพะฒะฐัั ัะธะบัะธะฒะฝัะน UID: guest.
ะัะธะผะตะฝะธัั ะปะธะผะธัั Free-ะฟะพะปัะทะพะฒะฐัะตะปั:
ะะฐะบัะธะผะฐะปัะฝัะน ัะฐะทะผะตั ัะฐะนะปะฐ ะฟะพ ัะธะฟั (PDF/JPG/PNG ะธ ะดั.)
ะะฐะบัะธะผะฐะปัะฝะพะต ะบะพะปะธัะตััะฒะพ ัะฐะนะปะพะฒ ะฒ ะดะตะฝั
ะะฐะบัะธะผะฐะปัะฝะพะต ะบะพะปะธัะตััะฒะพ ัะฐะนะปะพะฒ ะทะฐ ะพะดะธะฝ ะทะฐะฟัะพั
ะะตะฝะตัะธัะพะฒะฐัั ะบะพัะพัะบะพะถะธะฒััะธะน signed URL (1โ2 ัะฐัะฐ) ะดะปั ัะบะฐัะธะฒะฐะฝะธั ัะฐะนะปะพะฒ ะณะพััะตะผ.
ะะฒัะพัะธะทะพะฒะฐะฝะฝัะต ะฟะพะปัะทะพะฒะฐัะตะปะธ ะพััะฐัััั ะฑะตะท ะธะทะผะตะฝะตะฝะธะน (ะดะปะธัะตะปัะฝัะน URL, ัะฒะพะธ ะปะธะผะธัั).
ะัะดะฐะฒะฐัั ะฝะฐ ััะพะฝั JSON ั:
{
"fileName": "guest/167xxxx_test.pdf",
"url": "...signed-url...",
"sizeMB": 0.5,
"mimeType": "application/pdf",
"userType": "Free"
}

ะัะพะฒะตัะบะฐ ัะพัะผะฐัะฐ ะธ ัะฐะทะผะตัะฐ ัะฐะนะปะฐ ะดะพะปะถะฝะฐ ัะฐะฑะพัะฐัั ะพะดะธะฝะฐะบะพะฒะพ ะดะปั ะณะพััะตะน ะธ ะฐะฒัะพัะธะทะพะฒะฐะฝะฝัั.
ะฆะตะปั: ะณะพััั ะผะพะถะตั ะบะพะฝะฒะตััะธัั/ะทะฐะณััะถะฐัั ัะฐะนะปั ะฑะตะท ัะตะณะธัััะฐัะธะธ, ะฝะพ ั ะพะณัะฐะฝะธัะตะฝะธัะผะธ Free-ะฟะพะปัะทะพะฒะฐัะตะปั.


ะะฐะดะฐัะฐ: Graceful shutdown backend
ะะฟะธัะฐะฝะธะต:
ะะตะฐะปะธะทะพะฒะฐัั ะบะพััะตะบัะฝัั ะพะฑัะฐะฑะพัะบั ัะธะณะฝะฐะปะพะฒ SIGTERM / SIGINT ะฒ backend NestJS, ััะพะฑั ะฟัะธ ะพััะฐะฝะพะฒะบะต Docker-ะบะพะฝัะตะนะฝะตัะฐ ะธะปะธ Ctrl+C:
ะทะฐะบััะฒะฐะปะธัั ัะพะตะดะธะฝะตะฝะธั ั ะฑะฐะทะพะน ะดะฐะฝะฝัั (Prisma),
ะทะฐะฒะตััะฐะปะธัั ะฒะพัะบะตัั ะธ ะพัะตัะตะดะธ,
backend ะบะพััะตะบัะฝะพ ะทะฐะฒะตััะฐะป ัะฐะฑะพัั ะฑะตะท ะฟะพัะตัะธ ะดะฐะฝะฝัั.
ะจะฐะณะธ:
ะะบะปััะธัั app.enableShutdownHooks() ะฒ main.ts.
ะ ัะตัะฒะธัะฐั (DB, Redis, ะพัะตัะตะดะธ) ัะตะฐะปะธะทะพะฒะฐัั OnApplicationShutdown ะธะปะธ OnModuleDestroy.
ะัะพะฒะตัะธัั ะพััะฐะฝะพะฒะบั ะบะพะฝัะตะนะฝะตัะฐ ัะตัะตะท docker stop ะธ Ctrl+C, ัะฑะตะดะธัััั, ััะพ ัะตััััั ะพัะฒะพะฑะพะถะดะฐัััั ะบะพััะตะบัะฝะพ.
ะัะธะพัะธัะตั: ััะตะดะฝะธะน โ ะดะปั ััะฐะฑะธะปัะฝะพะณะพ ะฟัะพะดะฐะบัะฝ ะทะฐะฟััะบะฐ.



### Frontend:
- [ ] ะกะพะทะดะฐัั ัะตัะฒะธั: `ng g service services/file`
- [ ] ะกะพะทะดะฐัั ะบะพะผะฟะพะฝะตะฝั Upload: `ng g component/components/file-upload`
- [ ] ะะตะฐะปะธะทะพะฒะฐัั drag-and-drop ะทะฐะณััะทะบั
- [ ] ะัะพะฑัะฐะถะตะฝะธะต ะฟัะพะณัะตััะฐ ะทะฐะณััะทะบะธ

## ๐ค ะจะะ 4: ะะฐัััะพะนะบะฐ Users ะผะพะดัะปั
### Backend:
- [ ] ะกะพะทะดะฐัั ะผะพะดัะปั `users`: `nest g module users`
- [ ] ะกะพะทะดะฐัั ัััะฝะพััั User ะดะปั Prisma
- [ ] ะกะพะทะดะฐัั ัะตัะฒะธั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ
- [ ] ะญะฝะดะฟะพะธะฝัั: `/users/profile`, `/users/stats`

## ๐๏ธ ะจะะ 5: ะะฐัััะพะนะบะฐ ะะ ะธ Prisma
- [ ] ะะฐัััะพะธัั Prisma ะบะพะฝัะธะณััะฐัะธั ะฒ `backend`
- [ ] ะกะพะทะดะฐัั ะผะธะณัะฐัะธะธ ะดะปั User ะธ File ัััะฝะพััะตะน
- [ ] ะัะพะฒะตัะธัั ัะฒัะทั ะผะตะถะดั ัะฐะฑะปะธัะฐะผะธ
- [ ] ะะฐัััะพะธัั ัะตะฟะพะทะธัะพัะธะธ

## ๐จ ะจะะ 6: ะะฐะทะพะฒัะน UI ะธ Routing
- [ ] ะะฐัััะพะธัั routing ะฒ Angular
- [ ] ะกะพะทะดะฐัั Layout ะบะพะผะฟะพะฝะตะฝั
- [ ] ะะพะผะฟะพะฝะตะฝั Dashboard
- [ ] ะะฐะฒะธะณะฐัะธะพะฝะฝะพะต ะผะตะฝั
- [ ] ะะฐัะธััะฝะฝัะต ัะพััั (Auth Guard)

## ๐ ะจะะ 7: ะะฝัะตะณัะฐัะธั ะธ CORS
- [ ] ะะฐัััะพะธัั CORS ะฒ NestJS
- [ ] ะะพะดะบะปััะธัั frontend ะบ backend API
- [ ] ะะฐัััะพะธัั ะธะฝัะตััะตะฟัะพัั ะดะปั ะฐะฒัะพัะธะทะฐัะธะธ
- [ ] ะะปะพะฑะฐะปัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ

## ๐ค ะจะะ 8: AI ะพะฑัะฐะฑะพัะบะฐ (ะทะฐะณะปััะบะธ)
- [ ] ะกะพะทะดะฐัั ัะตัะฒะธั ะดะปั ะพะฑัะฐะฑะพัะบะธ PDF (mock)
- [ ] ะกะพะทะดะฐัั ัะตัะฒะธั ะดะปั ัะฐัะบัะฐัะบะธ ัะพัะพ (mock)
- [ ] ะัะตัะตะดั ะพะฑัะฐะฑะพัะบะธ (ะฟัะพััะตะนัะฐั ัะตะฐะปะธะทะฐัะธั)
- [ ] WebSocket ะดะปั real-time ัะฒะตะดะพะผะปะตะฝะธะน

## ๐งช ะจะะ 9: ะขะตััะธัะพะฒะฐะฝะธะต
- [ ] ะัะพัะตััะธัะพะฒะฐัั ะฟะพะปะฝัะน flow: ะฒัะพะด โ ะทะฐะณััะทะบะฐ โ ะพะฑัะฐะฑะพัะบะฐ
- [ ] ะัะพะฒะตัะธัั ัะฐะฑะพัั ั ัะฐะทะฝัะผะธ ัะธะฟะฐะผะธ ัะฐะนะปะพะฒ
- [ ] ะขะตััะธัะพะฒะฐะฝะธะต ะพัะธะฑะพะบ ะธ edge cases
- [ ] ะัะพะฒะตัะธัั UI ะฝะฐ ะผะพะฑะธะปัะฝัั ััััะพะนััะฒะฐั

## ๐ ะจะะ 10: ะะตะฟะปะพะน ะฟะพะดะณะพัะพะฒะบะฐ
- [ ] ะกะพะฑัะฐัั production build frontend
- [ ] ะัะพัะตััะธัะพะฒะฐัั Docker ะพะฑัะฐะท
- [ ] ะะฐัััะพะธัั environment variables
- [ ] ะะพะดะณะพัะพะฒะธัั ะบ ะดะตะฟะปะพั ะฝะฐ Cloud Run

ะัะธะปะพะถะตะฝะธะต ะฟะพะทะฒะพะปัะตั ะฟะพะปัะทะพะฒะฐัะตะปัะผ ะพะฑัะฐะฑะฐััะฒะฐัั PDF ะธ ะธะทะพะฑัะฐะถะตะฝะธั ั ัะฐะทะดะตะปะตะฝะธะตะผ ะฝะฐะณััะทะบะธ:
ะขัะถัะปัะต VLM ะพะฟะตัะฐัะธะธ (DocLing, DocShadow) ะฒัะฟะพะปะฝััััั ะฝะฐ CUDA ัะตัะฒะตัะต.
ะัะณะบะธะต ะพะฟะตัะฐัะธะธ (ัะฐัะบัะฐัะบะฐ ะธะทะพะฑัะฐะถะตะฝะธะน, ัะบะปะตะนะบะฐ PDF, ัะฐะทะฑะธะฒะบะฐ, ะฝัะผะตัะฐัะธั ัััะฐะฝะธั)
ะฒัะฟะพะปะฝััััั ะฝะฐ ะฝะฐัะตะผ ะพะฑััะฝะพะผ ัะตัะฒะตัะต.
Frontend: Angular (ะฒะตะฑ)
Backend: NestJS
ะะฐะทะฐ ะดะฐะฝะฝัั: PostgreSQL
ะคะฐะนะปะพะฒะพะต ััะฐะฝะธะปะธัะต: Firebase Storage
ะะฒัะพัะธะทะฐัะธั: Firebase Auth (Google OAuth / Apple ID)

2๏ธโฃ ะขะธะฟั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะธ ะปะธะผะธัั
ะขะธะฟ ะฟะพะปัะทะพะฒะฐัะตะปั	ะะพัััะฟ	ะะธะผะธัั ะพะฟะตัะฐัะธะน	ะะธะผะธั ัััะฐะฝะธั PDF	ะฅัะฐะฝะตะฝะธะต ัะฐะนะปะพะฒ
Free	ะะฐ	5 ะพะฟะตัะฐัะธะน ะฒ ะดะตะฝั	ะะพ 10 ัััะฐะฝะธั PDF	ะัะตะผะตะฝะฝะพะต (1 ัะฐั)
Paid (iOS ะฟะพะดะฟะธัะบะฐ)	ะะฐ	ะะตะท ะพะณัะฐะฝะธัะตะฝะธะน / ัะฐะทัะผะฝัะต ะปะธะผะธัั (ะฝะฐะฟัะธะผะตั, 50 ะพะฟะตัะฐัะธะน/ะดะตะฝั)	ะะพ 100 ัััะฐะฝะธั PDF ะทะฐ ัะฐะท	ะะปะธัะตะปัะฝะพะต (ะดะพ ะพะบะพะฝัะฐะฝะธั ะฟะพะดะฟะธัะบะธ ะธะปะธ ะฟะพ ะถะตะปะฐะฝะธั)
ะะฐะทะดะตะปะตะฝะธะต ะฒัะตะผะตะฝะฝะพะณะพ ััะฐะฝะตะฝะธั ะดะปั Free / ะดะพะปะณะพะฒัะตะผะตะฝะฝะพะณะพ ะดะปั Paid
ะขะธะฟ ัะฐะนะปะฐ	Free max	Paid max
PDF	        10 MB	    100MB
JPG/PNG	    5MB	        50MB
HEIC	    5MB	        50MB



ะะธะผะธัั ะฟัะธะผะตะฝััััั ะดะปั ะฒัะตั ะพะฟะตัะฐัะธะน (ะบะฐะบ VLM, ัะฐะบ ะธ ะปัะณะบะธั)
Free ะฟะพะปัะทะพะฒะฐัะตะปะธ ะฝะต ะฟะพะปััะฐัั ะดะปะธัะตะปัะฝะพะณะพ ััะฐะฝะตะฝะธั
Paid ะฟะพะปัะทะพะฒะฐัะตะปะธ ะธะผะตัั ะดะปะธัะตะปัะฝะพะต ััะฐะฝะตะฝะธะต ะธ ะฟะพะฒััะตะฝะฝัะต ะปะธะผะธัั
Backend ะฒัะดะฐัั signed URL ะดะปั ัะบะฐัะธะฒะฐะฝะธั ัะฐะนะปะพะฒ

4๏ธโฃ ะัะธะผะตัะฐะฝะธั
ะัะต ัะฐะนะปั ะฟัะธะฒะฐัะฝัะต, ะฟััะผะพะน ะดะพัััะฟ ะทะฐะฟัะตััะฝ
Backend ะพัะฒะตัะฐะตั ะทะฐ:
ะัะพะฒะตัะบั ะฟะพะดะฟะธัะบะธ ะธ ะปะธะผะธัะพะฒ
ะัะดะฐัั signed URL
ะกะฑัะพั ะปะธะผะธัะพะฒ ะดะปั free ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะบะฐะถะดัะน ะดะตะฝั



ะะฐะดะฐัะธ ะฝะฐ 20012026
ะงะขะ ะะะะะะ ะะะะขะะ (ะะะะะงะะซะ ะะะะ)
๐น 1๏ธโฃ ะฃะฑัะฐัั @Req() โ ัะดะตะปะฐัั ะบัะฐัะธะฒะพ

@CurrentUser() decorator

ัะธะฟะธะทะธัะพะฒะฐะฝะฝัะน ะดะพัััะฟ ะบ ะฟะพะปัะทะพะฒะฐัะตะปั
 
getMe(@CurrentUser() user: IAuthMe) ะกะะะะะะ !!!

๐น 2๏ธโฃ Mapper Firebase โ Domain

ะฒัะฝะตััะธ ะฝะพัะผะฐะปะธะทะฐัะธั ะธะท ะบะพะฝััะพะปะปะตัะฐ

ะตะดะธะฝะฐั ัะพัะบะฐ ะฟัะตะพะฑัะฐะทะพะฒะฐะฝะธั

mapFirebaseUser(decoded: DecodedIdToken): IAuthMe ะกะะะะะะ !!!


ะกะะะะะะ !!! ๐น 3๏ธโฃ ะัะธะฒัะทะบะฐ ะบ ะฑะธะทะฝะตั-ะปะพะณะธะบะต ะกะะะะะะ !!!

ัะฒัะทะฐัั Firebase UID โ user ะฒ ะะ

ะฐะฒัะพัะพะทะดะฐะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั ะฟัะธ ะฟะตัะฒะพะผ ะปะพะณะธะฝะต

๐น 4๏ธโฃ Frontend: ัะตะฐะปัะฝัะน usage

ะดะตัะณะฐัั /auth/me

ััะฐะฝะธัั user state (signal / store)

UI-ัะตะฐะบัะธั ะฝะฐ login / logout

๐น 5๏ธโฃ (ะพะฟัะธะพะฝะฐะปัะฝะพ, ะตัะปะธ ะฑัะดะตั ะฒัะตะผั)

refresh token strategy

role / claims

@Public() vs protected ะผะฐัััััั

๐งน 3๏ธโฃ ะัะณะบะฐั ะฟะพะปะธัะพะฒะบะฐ

ะฃะฑัะฐัั ะปะธัะฝะธะต ะปะพะณะธ

ะะฐัะธะบัะธัะพะฒะฐัั README:

ะบะฐะบ ัะฐะฑะพัะฐะตั auth

ะบะฐะบ ะฟะพะปััะธัั ัะพะบะตะฝ

ะบะฐะบ ัะฐะฑะพัะฐะตั dev-bypass











powershell
# ะัะฟะพะปะฝะธัั ะฒ PowerShell:
cd E:\project\converter
mkdir frontend, backend, shared, firebase

# ะะฝะธัะธะฐะปะธะทะธััะตะผ shared ะบะฐะบ npm ะฟะฐะบะตั
cd shared && npm init -y
cd ..

# ะกะพะทะดะฐะตะผ Angular ะฟัะพะตะบั
ng new frontend --standalone --skip-tests --style=scss --routing --package-manager=npm --skip-git

# ะกะพะทะดะฐะตะผ NestJS ะฟัะพะตะบั
nest new backend --package-manager=npm --skip-git

# ะกะพะทะดะฐะตะผ ะฑะฐะทะพะฒัะน Dockerfile ะดะปั Cloud Run
New-Item backend/Dockerfile -Type File
New-Item backend/cloudbuild.yaml -Type File

# ะกะพะทะดะฐะตะผ firebase ะบะพะฝัะธะณะธ
New-Item firebase/storage.rules -Type File
New-Item firebase/firebase.json -Type File

ะะปะฐะฝั ะฝะฐ 20.01.26

ยซะัะพะดะพะปะถะฐะตะผ ั Firebase JWT Guardยป


ะะฐะฒััะฐ ะผะพะถะตะผ ัะฟะพะบะพะนะฝะพ, ะฑะตะท ะฐะฒัะฐะปะพะฒ, ะฟัะพะนัะธัั ะฟะพ ะฟะปะฐะฝั:

1๏ธโฃ Firebase Auth ะฟะพ-ะฝะฐััะพััะตะผั

ะฟะพะปััะธัั ID token ะะะขะะ ะกะะะะะขะฌ

ะดะตัะฝััั ะทะฐัะธััะฝะฝัะน endpoint

ัะฑะตะดะธัััั, ััะพ guard ัะฐะฑะพัะฐะตั end-to-end

2๏ธโฃ E2E ะดะปั /health

ะฟัะพััะพะน ัะตัั

ััะพะฑั ะฑะพะปััะต ะฝะธะบะพะณะดะฐ ะฝะต ะณะฐะดะฐัั ยซะฐ ะพะฝะพ ะฒะพะพะฑัะต ะถะธะฒะพ?ยป

3๏ธโฃ ะัะธะฒะตััะธ auth ะฒ ะฟะพััะดะพะบ

@Public() ะะฐะฑะพัะฐะตั

ะณะปะพะฑะฐะปัะฝัะน guard ะะฐะฑะพัะฐะตั

ะฐะบะบััะฐัะฝัะน dev-bypass ะดะปั localhost (ะฑะตะท ะบะพัััะปะตะน) ะะพัะพะผ




๐ ะจะะ 7: Firebase JWT Auth (core security)
1๏ธโฃ Firebase JWT Guard (ะทะฐะฒะตััะธะผ)

FirebaseAuthGuard

ะธะทะฒะปะตัะตะฝะธะต Bearer token

verifyIdToken

request.user = decodedToken

ะบะพััะตะบัะฝัะต HTTP ะพัะธะฑะบะธ (401, 403)

2๏ธโฃ @Public() decorator

ะบะฐััะพะผะฝัะน ะดะตะบะพัะฐัะพั

ะพัะบะปััะตะฝะธะต guardโะฐ ะดะปั:

/auth/login

/health

ัะธััะฐั ะธ ะผะฐัััะฐะฑะธััะตะผะฐั ััะตะผะฐ

3๏ธโฃ ะะปะพะฑะฐะปัะฝะพะต ะฟะพะดะบะปััะตะฝะธะต Guard

APP_GUARD

ะตะดะธะฝะฐั ัะพัะบะฐ security

ะฑะตะท ะดัะฑะปะธัะพะฒะฐะฝะธั ะฒ ะบะพะฝััะพะปะปะตัะฐั

4๏ธโฃ Swagger ๐ Authorize

Bearer Auth ััะตะผะฐ

ะฟัะพะฒะตัะบะฐ ัะพะบะตะฝะฐ ะธะท Swagger UI

/auth/me ั ัะตะฐะปัะฝัะผ Firebase user

๐งช ะะธะฝะธ-ะฟัะพะฒะตัะบะธ

curl ั ัะพะบะตะฝะพะผ

Swagger ั ัะพะบะตะฝะพะผ

ะทะฐะฟัะพั ะฑะตะท ัะพะบะตะฝะฐ โ 401

๐ (ะัะปะธ ะพััะฐะฝะตััั ะฒัะตะผั) โ ะฐััะธัะตะบัััะฐ

ะบัะดะฐ ะบะปะฐััั User ะธะฝัะตััะตะนั

ััะพ ััะฐะฝะธัั ะฒ request.user

ะฟะพะดะณะพัะพะฒะบะฐ ะบ Prisma / ะะ


ะะพะฐะดะผะฐะฟ ะฟัะพ ัะตััั
ะะพั ะฟัะฐะฒะธะปัะฝัะน roadmap โ ะฟะพ ะถะตะปะฐะฝะธั:

1๏ธโฃ Unit-ัะตััั FirebaseAuthGuard

ะัะพะฒะตัะธัั:

ะฝะตั ัะพะบะตะฝะฐ โ 401

ัะพะบะตะฝ ะฒ header โ ok

ัะพะบะตะฝ ะฒ body โ reject

(ะฑััััะพ, ัะธััะพ, ะฑะตะท NestApplication)

2๏ธโฃ Unit-ัะตััั AuthService

login$ happy-path

invalid token

Firebase error mapping

3๏ธโฃ Integration-ัะตัั (ะพะฟัะธะพะฝะฐะปัะฝะพ)

ะฝะฐััะพััะธะน Firebase

ะพัะดะตะปัะฝัะน env

ะทะฐะฟััะบ ะฒัััะฝัั

4๏ธโฃ ะะฐัะธะบัะธัะพะฒะฐัั auth-ะบะพะฝััะฐะบั

ะธะฝัะตััะตะนัั

shared DTO

ัััะพะณะฐั ัะธะฟะธะทะฐัะธั ะพัะฒะตัะพะฒ
